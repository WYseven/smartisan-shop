<!DOCTYPE html>
<html lang="zh-cn">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title></title>
		<style>

		</style>
		<script src="./data.js"></script>
		<script>

			/*let list = [
				{
					"id": 1000239,
			        "name": "Smartisan 半入耳式线控耳机",
			        "price": 99.00,
			        "image_pre": "http://img01.smartisanos.cn/",
			        "sku_list":[
			        	{
			        		"sku_id": "100023901",
				            "title": "Smartisan S-100 线控耳机",
				            "sub_title": "卓越的 14.2mm 发音单元、三按键式线控",
			                "image": "attr/v2/1000239/19CD5E834F1394CE5190285FCF64E0C0/",
			                "show_short_name": "红色",
			        	}
			        ]
				}
			]*/

			let list = data.data.list;

			let newList = list.map((item) => {
						let {id,name,price,image_pre} = item;
						let sku_list = [];



						item.sku_info.forEach((item2) => {
							if(!sku_list.find((item3) => item3.color_id === item2.color_id )){
								let {direct_to_cart,ali_image,sku_id,sub_title,title,color_id,price} 
									= item2;

								let spec_json = item2.spec_json.map(function (json_item){
									let {image,show_name,spec_value_id} = json_item;
									return 	{image};
								})

								sku_list.push({direct_to_cart,ali_image,sku_id,sub_title,title,price,...spec_json[0]})
							}
						})
						
						return {id,name,price,image_pre:'http://img01.smartisanos.cn/',
							sku_list: sku_list
						}
					});

			console.log(JSON.stringify(newList,null,2));


		</script>
	</head>

	<body>

	</body>
</html>
